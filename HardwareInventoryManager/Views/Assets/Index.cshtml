@*@model IEnumerable<HardwareInventoryManager.ViewModels.AssetViewModel>*@
@model HardwareInventoryManager.ViewModels.AssetIndexViewModel

@{
    ViewBag.Title = "Assets List";
}

<h2>Assets</h2>

<p>
    @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-default" })
</p>

<div class="col-md-12">
    <table id="table_id" class="table table-striped table-hover dt-responsive" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Model</th>
                <th>Serial Number</th>
                <th>Purchase Date</th>
                <th>Obsolescence Date</th>
                <th>Price Paid</th>
                <th>Location</th>
                <th>Make</th>
                <th>Category</th>
                <th>Warranty Period</th>
                <th></th>
            </tr>
        </thead>
    </table>
</div>
@section scripts {
    <script type="text/javascript">

        $(document).ready(function () {

            var tableData = @Html.Raw(Model.AssetListJson)

            $("#table_id").DataTable( {
                data: tableData.Table,
                responsive: true,
                columns: [
                    { data: 'Model' },
                    { data: 'SerialNumber' },
                    { data: 'PurchaseDateFormatted' },
                    { data: 'ObsolescenceDateFormatted' },
                    { data: 'PricePaid' },
                    { data: 'LocationDescription' },
                    { data: 'AssetMake.Description' },
                    { data: 'Category.Description' },
                    { data: 'WarrantyPeriod.Description' },
                    {
                        data: function (data) {
                            return linkHelper(data);
                        }, className: "all"
                    }
                ]
            });
        });

        var linkHelper = function (data) {
            return '<a href="Assets/Details/' + data.AssetId + '">Details</a> '
            + '<a href="Assets/Edit/' + data.AssetId + '">Edit</a> '
            + '<a href="Assets/Delete/' + data.AssetId + '">Delete</a>';
        };
    </script>
}
